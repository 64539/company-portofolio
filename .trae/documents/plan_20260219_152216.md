I will implement the "Zero Error" enhancements as follows:

### 1. Scroll Fix & Mobile Layout

* **Modify** **`AdminModal.tsx`**:

  * Enforce `max-h-[90vh]` and `overflow-y-auto` on the main container.

  * Ensure the split-pane layout handles scrolling independently (sidebar scroll vs. content scroll).

  * Verify touch-scrolling (`-webkit-overflow-scrolling: touch`) for iOS.

### 2. Input Robustness & Validation

* **Modify** **`AdminModal.tsx`**:

  * Add real-time validation for the reply textarea (min 10 chars, max 5000 chars).

  * Disable the "Send" button if invalid.

  * Show a character counter (`current/max`).

  * Implement `localStorage` based auto-save for drafts (key: `draft_reply_{messageId}`).

  * Sanitize input before sending (basic trimming and HTML escape prevention on client-side).

### 3. Loading States & Feedback

* **Modify** **`AdminModal.tsx`**:

  * Create a `MessageListSkeleton` component for the sidebar.

  * Create a `MessageDetailSkeleton` for the right pane.

  * Add a visual spinner/loader to the "Send Reply" button.

  * Implement toast notifications (using a simple custom toast or library if available) for success/error feedback.

### 4. Environment Audit & Security

* **Create** **`src/lib/env.ts`**:

  * Validate `UPSTASH_REDIS_REST_URL`, `UPSTASH_REDIS_REST_TOKEN`, `RESEND_API_KEY`, `ADMIN_PASSWORD` at runtime.

  * Log clear warnings if missing (but do not crash in dev, fallback gracefully).

* **Update** **`src/lib/redis.ts`** **and API routes**: Use the validated env vars.

### 5. Touch Target & Mobile Optimization

* **Modify** **`AdminModal.tsx`** **and** **`Footer.tsx`**:

  * Ensure all clickable elements (buttons, icons) have `min-h-[44px]` and `min-w-[44px]`.

  * Add appropriate padding/margin for touch targets.

  * Verify `Footer` social links have ample spacing.

### 6. Testing & Documentation

* **Testing**: I will manually verify the flow (Login -> View -> Draft -> Reply -> Loading -> Success).

* **Documentation**: I will create a `DEPLOYMENT.md` file with the checklist and environment variable guide.

Trae, I'll start with the Environment Audit to ensure a solid foundation, then move to the AdminModal enhancements.

**Wait, one refinement:**
For "Sanitization", since we are sending HTML emails via Resend, we need to be careful. I will ensure the client-side preview treats input as text (except for line breaks) to prevent XSS in the admin view, while the server-side API constructs the HTML email safely.

**Database Migration**: No schema changes needed, but I will ensure the new `draft` feature uses `localStorage` so it doesn't clutter the DB.

Let's execute this "Zero Error" standard!

<br />

**Trae, lakukan refactor pada section 'The Lab' sebagai berikut:**

1. **Project Cleanup:** Hapus semua project lain di 'The Lab', sisakan hanya satu: **'Jastip Web (Product Alpha)'**.
2. **Custom Detail Pop-up:** Saat project diklik, tampilkan modal detail yang mencakup:
   * **Industrial Tech Stack:** List tech stack premium (Next.js, Tailwind, Upstash, Resend).
   * **Project Background:** Deskripsi singkat tentang modernisasi sistem jastip.
   * **The Neural Team:** Tampilkan 4 peran utama (CEO, CTO, COS, CPO) dengan layout yang rapi.
   * **Progress Indicator:** Tampilkan angka **67%** dengan animasi *progress bar* atau *circular progress* yang futuristik.
3. **UI Professionalism:** Pastikan layout The Lab ini terlihat seperti etalase produk teknologi kelas dunia, bukan sekadar galeri portofolio biasa.
4. **Admin Integration:** Pastikan jika user bertanya tentang Jastip ini lewat form, admin bisa melihat konteksnya di Admin Panel.

